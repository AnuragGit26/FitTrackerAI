---
alwaysApply: true
---

## 1. End-to-End Integration

- Implement UI + business logic + DB changes cohesively.
- Validate full flow from user action to persisted state & back.
- Ensure new components do not degrade existing UX.
- Handle loading, error states, and offline fallbacks.

---

## 2. Architectural Planning Before Coding

Before writing code, prepare a short design outline including:

- Feature scope & expected user journey
- Data flow (UI → Logic → DB → IndexedDB → UI)
- Impact on existing modules and shared services
- API endpoints, schema updates, and caching approach
- Risks, scalability concerns, performance expectations

---

## 3. Supabase + IndexedDB Data Management

- Update schema/tables safely with version awareness.
- Keep IndexedDB in sync with Supabase for offline-first behavior.
- Document new columns, indexes, or migrations.
- Ensure efficient querying and indexing.

---

## 4. UI/UX Implementation Standards

- Follow the existing design language & component patterns.
- Maintain accessibility and responsiveness across devices.
- Implement loading, success, failure, empty state behaviors.
- No UI change without confirming user impact.

---

## 5. Code Review & Quality Gate

Every feature must undergo a senior-level review with mindset of:

- **Architect** — scalable design decisions
- **Senior Engineer** — performance & maintainability
- **Product Manager** — user value and flow completeness

Review checklist:

- Readability & modularity
- Efficient DB queries and caching
- IndexedDB sync logic where applicable
- Error handling and security boundaries
- No dead code or unnecessary complexity
- Test coverage exists for core logic
- Ensure this rule is relevant to project requirements.
- Test and fix lint errors and build errors without any functionality changes.

Merge only after approval.

---

## 6. Testing Requirements

Test coverage must include:

- End-to-end scenario walkthrough
- Regression testing for old flows
- Happy-path + edge cases + failure handling
- Network-down/offline scenarios if data sync involved

---

## 7. Documentation Expectations

For any non-trivial feature:

- Update README / Architecture notes / DB Schema docs
- Keep comments minimal, explaining logic rather than code
- Record decisions that future developers should know

---

## 8. Technical Documentation Reference

**CRITICAL**: Before implementing features or making architectural decisions, consult the comprehensive technical documentation:

- **Location**: `TECHNICAL_DOCUMENTATION.md` (root directory)
- **Purpose**: Complete reference for business requirements, system architecture, data models, and implementation details

### Key Sections to Reference

- **Business Requirements & Objectives**: Understand the "why" behind features
- **Core Features & Business Logic**: Detailed algorithms, calculations, and business rules
- **Data Architecture**: Database schemas, relationships, and indexing strategies
- **System Architecture**: Architecture patterns, data flow, and integration points
- **API & Integration Points**: External service integrations and authentication flows

### When to Consult

- **Before starting new features**: Understand business requirements and success metrics
- **When modifying data models**: Check schema documentation and migration strategies
- **When integrating APIs**: Review integration patterns and authentication flows
- **When optimizing performance**: Reference performance targets and optimization strategies
- **When resolving conflicts**: Understand business rules and data flow patterns

### Documentation Maintenance

- Update `TECHNICAL_DOCUMENTATION.md` when:
  - Adding new features or major functionality
  - Changing data models or schemas
  - Modifying business logic or algorithms
  - Adding new integrations or APIs
  - Changing architecture patterns

---

## Summary

| Area | Must Be Completed |
|---|---|
| UI updates | ✔ Fully integrated |
| App logic | ✔ Connected to UI & data |
| Supabase | ✔ Schema & queries updated |
| IndexedDB | ✔ Offline state maintained |
| Tests | ✔ Added/updated |
| Review | ✔ Mandatory approval |
| Documentation | ✔ Updated (including TECHNICAL_DOCUMENTATION.md) |
| Technical Reference | ✔ Consulted before implementation |

---

By following this document consistently, we maintain a clean, scalable codebase with smooth feature development and production-ready delivery.
